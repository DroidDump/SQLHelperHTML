<!DOCTYPE html><html lang="ru-RU"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="viewport" content="width=device-width"><title>Record Oracle PL/SQL &#8212; SQL Helper</title><link rel="stylesheet" href="wp-content/cache/min/1/fa8990c4217289171489528cd3f70146.css" media="all" data-minify="1"><script type="text/javascript" src="wp-includes/js/jquery/jquery.min.js?ver=3.6.1" id="jquery-core-js" defer=""></script><link rel="stylesheet" href="css/style.css"></head><body class="post-template-default single single-post postid-3314 single-format-standard one-sidebar-left medium-sidebar large-font-sidebar large-font-content"><div id="page" class="hfeed site"><header id="masthead" class="site-header" role="banner"><div class="site-branding"><h1 class="site-title"><a href="index.html" rel="home">SQL Helper</a></h1></div><nav role="navigation" class="site-navigation main-navigation"><h1 class="assistive-text">Menu</h1><div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to content</a></div><div class="menu-sql-container"><ul id="menu-sql" class="menu"><li id="menu-item-2533" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2533"><a href="sql-language.html">SQL</a></li><li id="menu-item-7341" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7341"><a href="contents-oracle-plsql.html">Oracle PL/SQL</a></li><li id="menu-item-3192" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3192"><a href="mysql-manual.html">MySQL</a></li><li id="menu-item-7342" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7342"><a href="contents-sql-server.html">SQL Server</a></li><li id="menu-item-7343" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7343"><a href="sqlite-manual.html">SQLite</a></li><li id="menu-item-6422" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6422"><a href="postgresql-manual.html">PostgreSQL</a></li><li id="menu-item-7201" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7201"><a href="mariadb-manual.html">MariaDB</a></li></ul></div></nav></header><div id="main" class="site-main"><div id="primary" class="content-area"><div id="content" class="site-content" role="main"><article id="post-3314" class="post-3314 post type-post status-publish format-standard hentry category-collections-and-records-oracle-plsql"><header class="entry-header"><h1 class="entry-title">Record Oracle PL/SQL</h1><div class="entry-meta"></div></header><div class="entry-content"><p>В этом учебном материале вы узнаете, как использовать <strong>спецификатор записи Record</strong> в Oracle PL/SQL с синтаксисом и примерами.<br><span id="more-3314"></span></p><h2>Описание</h2><p><strong>Record</strong> представляет собой группу связанных элементов данных, хранящихся в полях, каждая со своим именем и типом данных. Вы можете использовать Record как переменную, которая может содержать строку таблицы или некоторые столбцы (поля) из строки таблицы.</p><h2>Определение и объявление Record в в Oracle PL/SQL</h2><p>Атрибут <a href="rowtype-oracle-plsql.html">%ROWTYPE</a> позволяет объявить запись, представляющую строку в таблице базы данных, без перечисления всех столбцов. Ваш код продолжает работать даже после добавления столбцов в таблицу. Если вы хотите представить подмножество столбцов в таблице или столбцы из разных таблиц, вы можете определить <a href="view.html">VIEW</a> или объявить <a href="cursors.html">CURSOR</a> для выбора правильных столбцов и любых необходимых объединений, а затем применить атрибут %ROWTYPE к VIEW или CURSOR.</p><h2>Синтаксис</h2><p>Синтаксис определения типа Record и объявления переменной в Oracle PL/SQL:</p><div class="sintax">TYPE type_rec_name IS Record (field_1 datatype,<br>field_2 datatype,<br>… field_n datatype);<br>var_rec type_rec_name;</div><h3>Параметры или аргументы</h3><p><span class="arg">type_rec_name</span> – имя определенного типа Record<br><span class="arg">var_rec</span> – имя переменной типа Record<br><span class="arg">field_1</span>, <span class="arg">field_2</span>,… <span class="arg">field_n</span> – поля типа Record<br><span class="arg">datatype</span> – тип данных для полей типа Record. Может быть любой из списка:</p><table><tbody><tr><th><span style="color:#404040">Типы данных БД</span></th><th><span style="color:#404040">Описание</span></th></tr><tr><td>collection_name</td><td>Коллекция (<a href="associative-arrays-oracle-plsql.html">associative array</a>, <a href="nested-tables-oracle-plsql.html">nested table</a> или <a href="varrays-oracle-plsql.html">varray</a>), ранее объявленная в текущей области.</td></tr><tr><td>collection_type_name</td><td>Пользовательский тип коллекции, определенный с использованием спецификатора типа данных TABLE или VARRAY.</td></tr><tr><td>CONSTANT</td><td>Обозначает объявление константы. Вы должны инициализировать константу при объявлении. После инициализации значение константы не может быть изменено.</td></tr><tr><td>constant_name</td><td>Программная константа.</td></tr><tr><td>cursor_name</td><td>Явный курсор, ранее объявленный в текущей области.</td></tr><tr><td>cursor_variable_name</td><td>Переменная курсора PL/SQL, ранее объявленная в текущей области.</td></tr><tr><td>db_table_name</td><td>Таблица базы данных или представление, которые должны быть доступны при декларировании.</td></tr><tr><td>db_table_name.column_name</td><td>Таблица базы данных и столбец, которые должны быть доступны при декларировании.</td></tr><tr><td>expression</td><td>Комбинация переменных, констант, литералов, операторов и вызовов функций.Простейшее выражение состоит из одной переменной. Когда декларирование в разработке, значение выражения присваивается константе или переменной.Значение и константы или переменной должны иметь совместимые типы данных.</td></tr><tr><td>NOT NULL</td><td>Ограничение, которое запрещает программе присваивать значение null переменной или константе. Присвоение значения null переменной, определенной как NOT NULL, вызывает предопределенное исключение VALUE_ERROR. Ограничению NOT NULL должно следовать в предложении инициализации.</td></tr><tr><td>object_name</td><td>Экземпляр типа объекта, ранее объявленного в текущей области.</td></tr><tr><td>record_name</td><td>Пользовательская или запись %ROWTYPE, ранее объявленная в текущей области.</td></tr><tr><td>record_name.field_name</td><td>Поле в пользовательской или %ROWTYPE записи, ранее объявленной в текущей области.</td></tr><tr><td>record_type_name</td><td>Пользовательский тип записи, который определяется с помощью спецификатора типа данных RECORD.</td></tr><tr><td>ref_cursor_type_name</td><td>Пользовательский тип переменной курсора, определенный с помощью спецификатора типа данных REF CURSOR.</td></tr><tr><td>%ROWTYPE</td><td>Представляет запись, которая может содержать строку из таблицы базы данных или курсора. Поля в записи имеют одинаковые имена и типы данных в виде столбцов в строке.</td></tr><tr><td>scalar_datatype_name</td><td>Предопределенный скалярный тип данных, такой как BOOLEAN, NUMBER или VARCHAR2. Включает в себя любые квалификаторы для семантики размера, точности или символа в сравнении с байтом.</td></tr><tr><td>%TYPE</td><td>Представляет тип данных ранее объявленной коллекции, переменной курсора, полем, объекту, записи, столбцу базы данных или переменной.</td></tr><tr><td>variable_name</td><td>Программная переменная.</td></tr></tbody></table><h2>Примечание</h2><ul><li>Для создания Record вы определяете тип записи, а затем объявляете переменную этого типа.</li><li>Вы также можете создать или найти COLUMN, VIEW или CURSOR PL/SQL со значениями, которые вы хотите использовать, и атрибут %ROWTYPE для создания соответствующей Record.</li><li>Вы можете определять типы Record в декларативной части любого блока PL/SQL, подпрограммы или пакета. Когда вы определяете свой собственный тип Record, вы можете указать ограничение NOT NULL для полей или присвоить им значения по умолчанию.</li><li>Тип Record, определенный в спецификации пакета, несовместим с идентично определенным локальным типом Record.</li></ul><h2>Примеры</h2><p>Рассмотрим несколько примеров, чтобы понять, как использовать Record в Oracle PL/SQL.</p><ul><li><a href="#rec1">Пример Record и объявление переменной</a></li><li><a href="#rec2">Пример Record с атрибутом поля NOT NULL</a></li><li><a href="#rec3">Пример записи в Oracle PL/SQL с помощью атрибута %ROWTYPE</a></li><li><a href="#rec4">Пример Record с помощью атрибута %TYPE</a></li><li><a href="#rec5">Пример Record в качестве возвращаемых значений функции.</a></li><li><a href="#rec6">Пример Record в качестве параметров процедуры.</a></li><li><a href="#rec7">Пример присвоение значений для Record</a></li><li><a href="#rec8">Пример Record с полем Record (вложенная запись)</a></li><li><a href="#rec9">Пример Record с полем Varray</a></li><li><a href="#rec10">Пример INSERT в базу данных Oracle PL/SQL с помощью Record</a></li><li><a href="#rec11">Пример UPDATE базы данных Oracle PL/SQL с помощью Record</a></li><li><a href="#rec12">Пример использования RETURNING с Record</a></li><li><a href="#rec14">Пример запроса данных в коллекцию Record</a></li></ul><h2 id="rec1">Пример Record и объявление переменной</h2><p>В следующем примере Oracle PL/SQL поля инициализированы как скалярные типы данных.</p><div id="crayon-63f82f988ef09889186588" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE DeptRecTyp IS RECORD (
dept_id    NUMBER(4) NOT NULL := 10,
dept_name  VARCHAR2(30) NOT NULL := 'Administration',
mgr_id     NUMBER(6) := 200,
loc_id     NUMBER(4) := 1700
);

dept_rec DeptRecTyp;
BEGIN
DBMS_OUTPUT.PUT_LINE('dept_id:   ' || dept_rec.dept_id);
DBMS_OUTPUT.PUT_LINE('dept_name: ' || dept_rec.dept_name);
DBMS_OUTPUT.PUT_LINE('mgr_id:    ' || dept_rec.mgr_id);
DBMS_OUTPUT.PUT_LINE('loc_id:    ' || dept_rec.loc_id);
END;
Результат:
dept_id:   10
dept_name: Administration
mgr_id:    200
loc_id:    1700</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-12">12</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-14">14</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-16">16</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-18">18</div><div class="crayon-num" data-line="crayon-63f82f988ef09889186588-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef09889186588-20">20</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef09889186588-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>DeptRecTyp<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>dept_id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(4)<span class="crayon-h"> </span><span class="crayon-r">NOT</span><span class="crayon-h"> </span><span class="crayon-r">NULL</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span>10,</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>dept_name<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">VARCHAR2</span>(30)<span class="crayon-h"> </span><span class="crayon-r">NOT</span><span class="crayon-h"> </span><span class="crayon-r">NULL</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'Administration'</span>,</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>mgr_id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-r">NUMBER</span>(6)<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>200,</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>loc_id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-r">NUMBER</span>(4)<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>1700</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-7"><span class="crayon-h">&nbsp;&nbsp;</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-8"><span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef09889186588-9"><span class="crayon-h">&nbsp;&nbsp;</span>dept_rec<span class="crayon-h"> </span>DeptRecTyp;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-10"><span class="crayon-r">BEGIN</span></div><div class="crayon-line" id="crayon-63f82f988ef09889186588-11"><span class="crayon-h">&nbsp;&nbsp;</span>DBMS_OUTPUT.PUT_LINE(<span class="crayon-s">'dept_id:&nbsp;&nbsp; '</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>dept_rec.dept_id);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-12"><span class="crayon-h">&nbsp;&nbsp;</span>DBMS_OUTPUT.PUT_LINE(<span class="crayon-s">'dept_name: '</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>dept_rec.dept_name);</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-13"><span class="crayon-h">&nbsp;&nbsp;</span>DBMS_OUTPUT.PUT_LINE(<span class="crayon-s">'mgr_id:&nbsp;&nbsp;&nbsp;&nbsp;'</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>dept_rec.mgr_id);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-14"><span class="crayon-h">&nbsp;&nbsp;</span>DBMS_OUTPUT.PUT_LINE(<span class="crayon-s">'loc_id:&nbsp;&nbsp;&nbsp;&nbsp;'</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>dept_rec.loc_id);</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-15"><span class="crayon-r">END</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-16">Результат:</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-17">dept_id:<span class="crayon-h">&nbsp;&nbsp; </span>10</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-18">dept_name:<span class="crayon-h"> </span>Administration</div><div class="crayon-line" id="crayon-63f82f988ef09889186588-19">mgr_id:<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>200</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef09889186588-20">loc_id:<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>1700</div></div></td></tr></table></div></div><p></p><p>В этом примере определяется тип Record с именем DeptRecTyp, указывающий начальное значение для каждого поля. Затем он объявляется переменная этого типа с именем dept_rec и печатаются её поля.</p><h2 id="rec2">Пример Record с атрибутом поля NOT NULL</h2><p>В следующем примере Oracle PL/SQL определим тип Record, укажем полям ограничение NOT NULL и присвоим начальные значения;</p><div id="crayon-63f82f988ef10941329784" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
--Для полей, объявленных NOT NULL, мы должны указать значение по умолчанию.
TYPE type_rec IS RECORD (id INTEGER NOT NULL := -1, name VARCHAR2(64) NOT NULL := '[anonymous]');
-- Объявление переменной типа Record
v_rec type_rec;
BEGIN
-- Мы не заполнили поле NAME, поэтому оно принимает значение по умолчанию, указанное выше.
dbms_output.put_line('id = '|| v_rec.id||', name = '||v_rec.name);
END;
Результат:
id = -1, name = [anonymous]</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef10941329784-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef10941329784-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef10941329784-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef10941329784-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef10941329784-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef10941329784-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef10941329784-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef10941329784-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef10941329784-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef10941329784-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef10941329784-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef10941329784-12">12</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef10941329784-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef10941329784-2"><span class="crayon-c">--Для полей, объявленных NOT NULL, мы должны указать значение по умолчанию.</span></div><div class="crayon-line" id="crayon-63f82f988ef10941329784-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>type_rec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(id<span class="crayon-h"> </span><span class="crayon-r">INTEGER</span><span class="crayon-h"> </span><span class="crayon-r">NOT</span><span class="crayon-h"> </span><span class="crayon-r">NULL</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span>-1,<span class="crayon-h"> </span>name<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(64)<span class="crayon-h"> </span><span class="crayon-r">NOT</span><span class="crayon-h"> </span><span class="crayon-r">NULL</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'[anonymous]'</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef10941329784-4"><span class="crayon-c">-- Объявление переменной типа Record</span></div><div class="crayon-line" id="crayon-63f82f988ef10941329784-5">v_rec<span class="crayon-h"> </span>type_rec;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef10941329784-6">&nbsp;</div><div class="crayon-line" id="crayon-63f82f988ef10941329784-7"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef10941329784-8"><span class="crayon-h"></span><span class="crayon-c">-- Мы не заполнили поле NAME, поэтому оно принимает значение по умолчанию, указанное выше.</span></div><div class="crayon-line" id="crayon-63f82f988ef10941329784-9"><span class="crayon-h">&nbsp;&nbsp;</span>dbms_output.put_line(<span class="crayon-s">'id = '</span>||<span class="crayon-h"> </span>v_rec.id||<span class="crayon-s">', name = '</span>||v_rec.name);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef10941329784-10"><span class="crayon-r">END</span>;<span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef10941329784-11">Результат:</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef10941329784-12">id<span class="crayon-h"> </span>=<span class="crayon-h"> </span>-1,<span class="crayon-h"> </span>name<span class="crayon-h"> </span>=<span class="crayon-h"> </span>[anonymous]</div></div></td></tr></table></div></div><p></p><h2 id="rec3">Пример записи в Oracle PL/SQL с помощью атрибута %ROWTYPE</h2><p>Если нам запись таблицы или её некоторые столбцы, то для определения записи таблицы используем атрибут %ROWTYP. Для определения некоторых столбцов таблицы используйте курсор.<br>В следующем примере объявим записи с помощью атрибута %ROWTYPE;</p><div id="crayon-63f82f988ef13108119109" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
-- Объявим переменную записи, которая может содержать строку из таблицы EMPLOYEES.
-- Поля записи автоматически соответствуют именам и типам столбцов.
-- В этом случае не требуется объявление TYPE.
rec1 employees%ROWTYPE;
-- Используйте &lt;cursor&gt;%ROWTYPE вместо &lt;table&gt;%ROWTYPE, так как нам нужны только некоторые столбцы.
CURSOR c1 IS SELECT department_id, department_name, location_id FROM departments;
rec2 c1%ROWTYPE;
BEGIN
NULL;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef13108119109-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef13108119109-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef13108119109-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef13108119109-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef13108119109-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef13108119109-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef13108119109-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef13108119109-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef13108119109-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef13108119109-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef13108119109-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef13108119109-12">12</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef13108119109-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef13108119109-2"><span class="crayon-c">-- Объявим переменную записи, которая может содержать строку из таблицы EMPLOYEES.</span></div><div class="crayon-line" id="crayon-63f82f988ef13108119109-3"><span class="crayon-c">-- Поля записи автоматически соответствуют именам и типам столбцов.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef13108119109-4"><span class="crayon-c">-- В этом случае не требуется объявление TYPE.</span></div><div class="crayon-line" id="crayon-63f82f988ef13108119109-5"><span class="crayon-h">&nbsp;&nbsp;</span>rec1<span class="crayon-h"> </span>employees<span class="crayon-t">%ROWTYPE</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef13108119109-6"><span class="crayon-c">-- Используйте &lt;cursor&gt;%ROWTYPE вместо &lt;table&gt;%ROWTYPE, так как нам нужны только некоторые столбцы.</span></div><div class="crayon-line" id="crayon-63f82f988ef13108119109-7"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">CURSOR</span><span class="crayon-h"> </span>c1<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">SELECT</span><span class="crayon-h"> </span>department_id,<span class="crayon-h"> </span>department_name,<span class="crayon-h"> </span>location_id<span class="crayon-h"> </span><span class="crayon-r">FROM</span><span class="crayon-h"> </span>departments;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef13108119109-8"><span class="crayon-h">&nbsp;&nbsp; </span>rec2<span class="crayon-h"> </span>c1<span class="crayon-t">%ROWTYPE</span>;</div><div class="crayon-line" id="crayon-63f82f988ef13108119109-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef13108119109-10"><span class="crayon-r">BEGIN</span></div><div class="crayon-line" id="crayon-63f82f988ef13108119109-11"><span class="crayon-r">NULL</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef13108119109-12"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p>В этом примере объявили запись rec1 с помощью конструкции teble_name%ROWTYPE и запись rec2 с помощью cursor_name%ROWTYPE.</p><h2 id="rec4">Пример Record с помощью атрибута %TYPE</h2><p>В следующем примере определим поля Record с помощью атрибута %TYPE, используя точечную нотацию table_name.column_name%TYPE и добавим пользовательское поле;</p><div id="crayon-63f82f988ef15787489219" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
-- смешаем поля, которые являются столбцами таблицы с пользовательскими полями.
TYPE type_rec IS RECORD (first_name employees.first_name%TYPE,
last_name employees.last_name%TYPE,
rating NUMBER);
v_rec type_rec;
BEGIN
NULL;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef15787489219-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef15787489219-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef15787489219-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef15787489219-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef15787489219-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef15787489219-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef15787489219-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef15787489219-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef15787489219-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef15787489219-10">10</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef15787489219-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef15787489219-2"><span class="crayon-c">-- смешаем поля, которые являются столбцами таблицы с пользовательскими полями.</span></div><div class="crayon-line" id="crayon-63f82f988ef15787489219-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>type_rec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(first_name<span class="crayon-h"> </span>employees.first_name<span class="crayon-t">%TYPE</span>,<span class="crayon-h"></span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef15787489219-4">last_name<span class="crayon-h"> </span>employees.last_name<span class="crayon-t">%TYPE</span>,<span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef15787489219-5">rating<span class="crayon-h"> </span><span class="crayon-r">NUMBER</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef15787489219-6"><span class="crayon-h">&nbsp;&nbsp;</span>v_rec<span class="crayon-h"> </span>type_rec;</div><div class="crayon-line" id="crayon-63f82f988ef15787489219-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef15787489219-8"><span class="crayon-r">BEGIN</span></div><div class="crayon-line" id="crayon-63f82f988ef15787489219-9"><span class="crayon-r">NULL</span>;<span class="crayon-h"></span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef15787489219-10"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p>В этом примере определили запись Record с помощью конструкции <span class="arg">table_name.column_name%TYPE</span> и подмешали к записи пользовательское поле <span class="arg">rating</span>.</p><h2 id="rec5">Пример Record в качестве возвращаемых значений функции.</h2><p>В следующем примере определим тип RECORD и функцию которая этот тип будет возвращать.</p><div id="crayon-63f82f988ef18655334742" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE EmpRec IS RECORD (
emp_id    NUMBER(4)
last_name VARCHAR2(10),
dept_num  NUMBER(2),
job_title VARCHAR2(9),
salary    NUMBER(7,2));
FUNCTION nth_highest_salary (n INTEGER) RETURN EmpRec IS ...
BEGIN
NULL;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef18655334742-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef18655334742-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef18655334742-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef18655334742-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef18655334742-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef18655334742-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef18655334742-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef18655334742-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef18655334742-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef18655334742-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef18655334742-11">11</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef18655334742-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef18655334742-2"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>EmpRec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(</div><div class="crayon-line" id="crayon-63f82f988ef18655334742-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>emp_id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(4)</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef18655334742-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>last_name<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(10),</div><div class="crayon-line" id="crayon-63f82f988ef18655334742-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>dept_num<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(2),</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef18655334742-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>job_title<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(9),<span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef18655334742-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>salary<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(7,2));</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef18655334742-8"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">FUNCTION</span><span class="crayon-h"> </span>nth_highest_salary<span class="crayon-h"> </span>(n<span class="crayon-h"> </span><span class="crayon-r">INTEGER</span>)<span class="crayon-h"> </span><span class="crayon-r">RETURN</span><span class="crayon-h"> </span>EmpRec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span>...</div><div class="crayon-line" id="crayon-63f82f988ef18655334742-9"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef18655334742-10"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">NULL</span>;</div><div class="crayon-line" id="crayon-63f82f988ef18655334742-11"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p>В этом примере функция <span class="arg">nth_highest_salary</span> возвращает значение типа EmpRec.</p><h2 id="rec6">Пример Record в качестве параметров процедуры.</h2><p>Подобно скалярным переменным, пользовательские Record (записи) могут быть объявлены как формальные параметры процедур.</p><div id="crayon-63f82f988ef1a315814935" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE EmpRec IS RECORD (
emp_id    employees. employee_id%TYPE,
last_name VARCHAR2(10),
job_title VARCHAR2(9),
salary    NUMBER(7,2));
...
PROCEDURE raise_salary (emp_info EmpRec);
BEGIN
...
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef1a315814935-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1a315814935-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef1a315814935-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1a315814935-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef1a315814935-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1a315814935-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef1a315814935-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1a315814935-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef1a315814935-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1a315814935-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef1a315814935-11">11</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef1a315814935-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1a315814935-2"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>EmpRec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(<span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef1a315814935-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>emp_id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>employees.<span class="crayon-h"> </span>employee_id<span class="crayon-t">%TYPE</span>,</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1a315814935-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>last_name<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(10),</div><div class="crayon-line" id="crayon-63f82f988ef1a315814935-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>job_title<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(9),</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1a315814935-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>salary<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(7,2));</div><div class="crayon-line" id="crayon-63f82f988ef1a315814935-7"><span class="crayon-h">&nbsp;&nbsp; </span>...</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1a315814935-8"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">PROCEDURE</span><span class="crayon-h"> </span>raise_salary<span class="crayon-h"> </span>(emp_info<span class="crayon-h"> </span>EmpRec);</div><div class="crayon-line" id="crayon-63f82f988ef1a315814935-9"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1a315814935-10"><span class="crayon-h">&nbsp;&nbsp; </span>...</div><div class="crayon-line" id="crayon-63f82f988ef1a315814935-11"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p>В этом примере процедура <span class="arg">raise_salary</span> принимает типа <span class="arg">EmpRec</span> как параметр.</p><h2 id="rec7">Пример присвоение значений для Record</h2><p>Чтобы определить все поля для Record по умолчанию, присвойте ей неинициализированную запись того же типа. Например</p><div id="crayon-63f82f988ef1c555718453" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE Rec_Typ IS RECORD (field1 NUMBER, field2 VARCHAR2(32) DEFAULT 'что-то');
rec1 Rec_Typ;
rec2 Rec_Typ;
BEGIN
-- Сначала rec1 имеет значения, которые мы присваиваем.
rec1.field1 := 100;
rec1.field2 := 'что-то ещё';
-- Присвоение rec1 пустой записи сбрасывает поля к их значениям по умолчанию.
-- Поле 1 равно NULL, а поле2 – 'что-то' (из-за положения DEFAULT выше).
rec1 := rec2;
dbms_output.put_line('Field1 = '
|| NVL(TO_CHAR(rec1.field1),'&lt;NULL&gt;') || ', field2 = ' || rec1.field2);
END;
Результат:
Field1 = &lt;NULL&gt;, field2 = что-то</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-12">12</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-14">14</div><div class="crayon-num" data-line="crayon-63f82f988ef1c555718453-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1c555718453-16">16</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef1c555718453-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-2"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>Rec_Typ<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(field1<span class="crayon-h"> </span><span class="crayon-r">NUMBER</span>,<span class="crayon-h"> </span>field2<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(32)<span class="crayon-h"> </span><span class="crayon-r">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-s">'что-то'</span>);</div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-3"><span class="crayon-h">&nbsp;&nbsp; </span>rec1<span class="crayon-h"> </span>Rec_Typ;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-4"><span class="crayon-h">&nbsp;&nbsp; </span>rec2<span class="crayon-h"> </span>Rec_Typ;</div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-5"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-6"><span class="crayon-c">-- Сначала rec1 имеет значения, которые мы присваиваем.</span></div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-7"><span class="crayon-h">&nbsp;&nbsp; </span>rec1.field1<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>100;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-8"><span class="crayon-h">&nbsp;&nbsp; </span>rec1.field2<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'что-то ещё'</span>;</div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-9"><span class="crayon-c">-- Присвоение rec1 пустой записи сбрасывает поля к их значениям по умолчанию.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-10"><span class="crayon-c">-- Поле 1 равно NULL, а поле2 – 'что-то' (из-за положения DEFAULT выше).</span></div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-11">rec1<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>rec2;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-12"><span class="crayon-h">&nbsp;&nbsp; </span>dbms_output.put_line(<span class="crayon-s">'Field1 = '</span><span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-13"><span class="crayon-h">&nbsp;&nbsp; </span>||<span class="crayon-h"> </span><span class="crayon-k">NVL</span>(<span class="crayon-k">TO_CHAR</span>(rec1.field1),<span class="crayon-s">'&lt;NULL&gt;'</span>)<span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">', field2 = '</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>rec1.field2);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-14"><span class="crayon-r">END</span>;</div><div class="crayon-line" id="crayon-63f82f988ef1c555718453-15">Результат:</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1c555718453-16">Field1<span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-h">&lt;</span><span class="crayon-r">NULL</span><span class="crayon-h">&gt;</span>,<span class="crayon-h"> </span>field2<span class="crayon-h"> </span>=<span class="crayon-h"> </span>что-то</div></div></td></tr></table></div></div><p>Вместо того, чтобы присваивать значения отдельно каждому полю в записи, вы можете сразу присваивать значения всем полям.<br>Вы можете назначить одну пользовательскую запись другой, если они имеют одинаковый тип данных. Имеются поля, которые соответствуют точно.<br>Рассмотрим следующий пример:</p><div id="crayon-63f82f988ef1f954887638" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
--Два идентичных объявления типа.
TYPE DeptRec1 IS RECORD ( dept_num  NUMBER(2), dept_name VARCHAR2(14));
TYPE DeptRec2 IS RECORD ( dept_num  NUMBER(2), dept_name VARCHAR2(14));
dept1_info DeptRec1;
dept2_info DeptRec2;
dept3_info DeptRec2;
BEGIN
-- Не допускается; различные типы данных, хотя поля одинаковы.
-- dept1_info: = dept2_info;
-- Это назначение допустимо, потому что записи имеют один и тот же тип.
dept2_info := dept3_info;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1f954887638-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1f954887638-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1f954887638-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1f954887638-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1f954887638-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef1f954887638-12">12</div><div class="crayon-num" data-line="crayon-63f82f988ef1f954887638-13">13</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef1f954887638-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1f954887638-2"><span class="crayon-c">--Два идентичных объявления типа.</span></div><div class="crayon-line" id="crayon-63f82f988ef1f954887638-3"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>DeptRec1<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(<span class="crayon-h"> </span>dept_num<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(2),<span class="crayon-h"> </span>dept_name<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(14));</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1f954887638-4"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>DeptRec2<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(<span class="crayon-h"> </span>dept_num<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">NUMBER</span>(2),<span class="crayon-h"> </span>dept_name<span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(14));</div><div class="crayon-line" id="crayon-63f82f988ef1f954887638-5"><span class="crayon-h">&nbsp;&nbsp; </span>dept1_info<span class="crayon-h"> </span>DeptRec1;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1f954887638-6"><span class="crayon-h">&nbsp;&nbsp; </span>dept2_info<span class="crayon-h"> </span>DeptRec2;</div><div class="crayon-line" id="crayon-63f82f988ef1f954887638-7"><span class="crayon-h">&nbsp;&nbsp; </span>dept3_info<span class="crayon-h"> </span>DeptRec2;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1f954887638-8"><span class="crayon-r">BEGIN</span></div><div class="crayon-line" id="crayon-63f82f988ef1f954887638-9"><span class="crayon-c">-- Не допускается; различные типы данных, хотя поля одинаковы.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1f954887638-10"><span class="crayon-c">-- dept1_info: = dept2_info;</span></div><div class="crayon-line" id="crayon-63f82f988ef1f954887638-11"><span class="crayon-c">-- Это назначение допустимо, потому что записи имеют один и тот же тип.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef1f954887638-12"><span class="crayon-h">&nbsp;&nbsp; </span>dept2_info<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>dept3_info;</div><div class="crayon-line" id="crayon-63f82f988ef1f954887638-13"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p></p><h2 id="rec8">Пример Record с полем Record (вложенная запись)</h2><p>Следующий пример показывает, как можно определить тип Record как вложенную в другой тип Record.</p><p></p><div id="crayon-63f82f988ef21098942348" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE name_rec IS RECORD (
first  employees.first_name%TYPE,
last   employees.last_name%TYPE
);

TYPE contact IS RECORD (
name  name_rec,                    -- вложенная запись name_rec
phone employees.phone_number%TYPE
);
friend contact;--переменная типа contact
BEGIN
friend.name.first := 'John';
friend.name.last := 'Smith';
friend.phone := '1-650-555-1234';

DBMS_OUTPUT.PUT_LINE (
friend.name.first  || ' ' ||
friend.name.last   || ', ' ||
friend.phone
);
END;
Результат:
John Smith, 1-650-555-1234</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-12">12</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-14">14</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-16">16</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-18">18</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-20">20</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-22">22</div><div class="crayon-num" data-line="crayon-63f82f988ef21098942348-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef21098942348-24">24</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef21098942348-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>name_rec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(</div><div class="crayon-line" id="crayon-63f82f988ef21098942348-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k">first</span><span class="crayon-h">&nbsp;&nbsp;</span>employees.first_name<span class="crayon-t">%TYPE</span>,</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k">last</span><span class="crayon-h">&nbsp;&nbsp; </span>employees.last_name<span class="crayon-t">%TYPE</span></div><div class="crayon-line" id="crayon-63f82f988ef21098942348-5"><span class="crayon-h">&nbsp;&nbsp;</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-6"><span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef21098942348-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>contact<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>name<span class="crayon-h">&nbsp;&nbsp;</span>name_rec,<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">-- вложенная запись name_rec</span></div><div class="crayon-line" id="crayon-63f82f988ef21098942348-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>phone<span class="crayon-h"> </span>employees.phone_number<span class="crayon-t">%TYPE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-10"><span class="crayon-h">&nbsp;&nbsp;</span>);</div><div class="crayon-line" id="crayon-63f82f988ef21098942348-11"><span class="crayon-h">&nbsp;&nbsp;</span>friend<span class="crayon-h"> </span>contact;<span class="crayon-c">--переменная типа contact</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-12"><span class="crayon-r">BEGIN</span></div><div class="crayon-line" id="crayon-63f82f988ef21098942348-13"><span class="crayon-h">&nbsp;&nbsp;</span>friend.name.<span class="crayon-k">first</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'John'</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-14"><span class="crayon-h">&nbsp;&nbsp;</span>friend.name.<span class="crayon-k">last</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'Smith'</span>;</div><div class="crayon-line" id="crayon-63f82f988ef21098942348-15"><span class="crayon-h">&nbsp;&nbsp;</span>friend.phone<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'1-650-555-1234'</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-16"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-63f82f988ef21098942348-17"><span class="crayon-h">&nbsp;&nbsp;</span>DBMS_OUTPUT.PUT_LINE<span class="crayon-h"> </span>(</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>friend.name.<span class="crayon-k">first</span><span class="crayon-h">&nbsp;&nbsp;</span>||<span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span>||</div><div class="crayon-line" id="crayon-63f82f988ef21098942348-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>friend.name.<span class="crayon-k">last</span><span class="crayon-h">&nbsp;&nbsp; </span>||<span class="crayon-h"> </span><span class="crayon-s">', '</span><span class="crayon-h"> </span>||</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>friend.phone</div><div class="crayon-line" id="crayon-63f82f988ef21098942348-21"><span class="crayon-h">&nbsp;&nbsp;</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-22"><span class="crayon-r">END</span>;</div><div class="crayon-line" id="crayon-63f82f988ef21098942348-23">Результат:</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef21098942348-24">John<span class="crayon-h"> </span>Smith,<span class="crayon-h"> </span>1<span class="crayon-o">-</span>650<span class="crayon-o">-</span>555<span class="crayon-o">-</span>1234</div></div></td></tr></table></div></div><p></p><p>В этом примере определили тип <span class="arg">name_rec</span> как вложенную запись типа <span class="arg">contact</span>. Доступ к полям вложенного типа записи получили с помощью точечной нотации.</p><h2 id="rec9">Пример Record с полем Varray</h2><p>Следующий пример показывает, как можно VARRAY определить как поле типа Record.</p><p></p><div id="crayon-63f82f988ef24515442682" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE full_name IS VARRAY(2) OF VARCHAR2(20);

TYPE contact IS RECORD (
name  full_name := full_name('John', 'Smith'),  --поля varray
phone employees.phone_number%TYPE
);

friend contact;
BEGIN
friend.phone := '1-650-555-1234';

DBMS_OUTPUT.PUT_LINE (
friend.name(1) || ' ' ||
friend.name(2) || ', ' ||
friend.phone
);
END;
Результат:
John Smith, 1-650-555-1234</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-12">12</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-14">14</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-16">16</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-18">18</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef24515442682-20">20</div><div class="crayon-num" data-line="crayon-63f82f988ef24515442682-21">21</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef24515442682-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>full_name<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-t">VARRAY</span>(2)<span class="crayon-h"> </span><span class="crayon-r">OF</span><span class="crayon-h"> </span><span class="crayon-r">VARCHAR2</span>(20);</div><div class="crayon-line" id="crayon-63f82f988ef24515442682-3"><span class="crayon-h"></span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>contact<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(</div><div class="crayon-line" id="crayon-63f82f988ef24515442682-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>name<span class="crayon-h">&nbsp;&nbsp;</span>full_name<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>full_name(<span class="crayon-s">'John'</span>,<span class="crayon-h"> </span><span class="crayon-s">'Smith'</span>),<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">--поля varray</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>phone<span class="crayon-h"> </span>employees.phone_number<span class="crayon-t">%TYPE</span></div><div class="crayon-line" id="crayon-63f82f988ef24515442682-7"><span class="crayon-h">&nbsp;&nbsp;</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-8"><span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef24515442682-9"><span class="crayon-h">&nbsp;&nbsp;</span>friend<span class="crayon-h"> </span>contact;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-10"><span class="crayon-r">BEGIN</span></div><div class="crayon-line" id="crayon-63f82f988ef24515442682-11"><span class="crayon-h">&nbsp;&nbsp;</span>friend.phone<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'1-650-555-1234'</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-12"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-63f82f988ef24515442682-13"><span class="crayon-h">&nbsp;&nbsp;</span>DBMS_OUTPUT.PUT_LINE<span class="crayon-h"> </span>(</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>friend.name(1)<span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span>||</div><div class="crayon-line" id="crayon-63f82f988ef24515442682-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>friend.name(2)<span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">', '</span><span class="crayon-h"> </span>||</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>friend.phone</div><div class="crayon-line" id="crayon-63f82f988ef24515442682-17"><span class="crayon-h">&nbsp;&nbsp;</span>);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-18"><span class="crayon-r">END</span>;</div><div class="crayon-line" id="crayon-63f82f988ef24515442682-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef24515442682-20">Результат:</div><div class="crayon-line" id="crayon-63f82f988ef24515442682-21">John<span class="crayon-h"> </span>Smith,<span class="crayon-h"> </span>1<span class="crayon-o">-</span>650<span class="crayon-o">-</span>555<span class="crayon-o">-</span>1234</div></div></td></tr></table></div></div><p></p><p>В этом примере определили тип VARRAY с именем <span class="arg">full_name</span> и тип Record с именем <span class="arg">contact</span>.Теперь в типе <span class="arg">contact</span> доступно поле типа <span class="arg">full_name</span>. Доступ к данным вложенного типа VARRAY получили с помощью точечной нотации.</p><h2 id="rec10">Пример INSERT в базу данных Oracle PL/SQL с помощью Record</h2><p>Oracle PL/SQL оператора INSERT позволяет вставлять Record в строки базы данных, используя одну переменную типа RECORD или атрибут %ROWTYPE в предложении VALUES вместо списка полей. Это делает ваш код более читабельным и поддерживаемым.<br>Если вы выдаете INSERT через инструкцию FORALL, вы можете вставлять значения из целого набора записей.<br>Количество полей в записи должно быть равно числу столбцов, перечисленных в предложении INTO, а соответствующие поля и столбцы должны иметь совместимые типы данных. Чтобы убедиться, что запись совместима с таблицей, вам может быть удобнее объявить переменную как тип <span class="arg">table_name%ROWTYPE</span>.<br>Пример вставка записи в Oracle PL/SQL с использованием %ROWTYPE</p><div id="crayon-63f82f988ef26497022499" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
dept_info dept%ROWTYPE;
BEGIN
-- deptno, dname и loc - столбцы таблицы.
-- Record записывает эти имена из %ROWTYPE.
dept_info.deptno := 70;
dept_info.dname := 'PERSONNEL';
dept_info.loc := 'DALLAS';
-- Используя %ROWTYPE, мы можем убрать список столбцов
-- (deptno, dname, loc) из инструкции INSERT.
INSERT INTO dept VALUES dept_info;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef26497022499-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef26497022499-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef26497022499-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef26497022499-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef26497022499-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef26497022499-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef26497022499-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef26497022499-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef26497022499-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef26497022499-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef26497022499-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef26497022499-12">12</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef26497022499-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef26497022499-2"><span class="crayon-h">&nbsp;&nbsp; </span>dept_info<span class="crayon-h"> </span>dept<span class="crayon-t">%ROWTYPE</span>;</div><div class="crayon-line" id="crayon-63f82f988ef26497022499-3"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef26497022499-4"><span class="crayon-c">-- deptno, dname и loc - столбцы таблицы.</span></div><div class="crayon-line" id="crayon-63f82f988ef26497022499-5"><span class="crayon-c">-- Record записывает эти имена из %ROWTYPE.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef26497022499-6"><span class="crayon-h">&nbsp;&nbsp;</span>dept_info.deptno<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>70;</div><div class="crayon-line" id="crayon-63f82f988ef26497022499-7"><span class="crayon-h">&nbsp;&nbsp;</span>dept_info.dname<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'PERSONNEL'</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef26497022499-8"><span class="crayon-h">&nbsp;&nbsp;</span>dept_info.loc<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'DALLAS'</span>;</div><div class="crayon-line" id="crayon-63f82f988ef26497022499-9"><span class="crayon-c">-- Используя %ROWTYPE, мы можем убрать список столбцов</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef26497022499-10"><span class="crayon-c">-- (deptno, dname, loc) из инструкции INSERT.</span></div><div class="crayon-line" id="crayon-63f82f988ef26497022499-11"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">INSERT</span><span class="crayon-h"> </span><span class="crayon-r">INTO</span><span class="crayon-h"> </span>dept<span class="crayon-h"> </span><span class="crayon-r">VALUES</span><span class="crayon-h"> </span>dept_info;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef26497022499-12"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p></p><p>В этом примере объявляется переменная <span class="arg">dept_info</span> с использованием %ROWTYPE. Вы можете выполнить INSERT со значением <span class="arg">dept_info</span> без указания списка столбцов. Объявление %ROWTYPE гарантирует, что атрибуты записи имеют точно такие же имена и типы, что и столбцы таблицы.</p><h2 id="rec11">Пример UPDATE базы данных Oracle PL/SQL с помощью Record</h2><p>Расширение только для PL/SQL оператора UPDATE позволяет обновлять строки базы данных с использованием одной переменной типа RECORD или %ROWTYPE в правой части оператора SET вместо списка полей.<br>Если вы запустите UPDATE с помощью оператора FORALL, вы можете обновить набор строк, используя значения из целого набора записей.<br>Также с помощью оператора UPDATE вы можете указать запись в предложении RETURNING для извлечения новых значений в запись. Если вы задаете UPDATE через оператор FORALL, вы можете получить новые значения из набора обновленных строк в коллекцию записей.<br>Количество полей в записи должно быть равно числу столбцов, перечисленных в предложении SET, а соответствующие поля и столбцы должны иметь совместимые типы данных.<br>Например:<br>Вы можете использовать ключевое слово ROW для представления целой строки:</p><div id="crayon-63f82f988ef2f848384859" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
dept_info dept%ROWTYPE;
BEGIN
dept_info.deptno := 30;
dept_info.dname := 'MARKETING';
dept_info.loc := 'ATLANTA';
-- Record dept_info будет иметь значения заполненных столбцов, а null
-- для любых других столбцов.
UPDATE dept SET ROW = dept_info WHERE deptno = 30;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef2f848384859-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef2f848384859-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef2f848384859-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef2f848384859-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef2f848384859-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef2f848384859-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef2f848384859-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef2f848384859-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef2f848384859-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef2f848384859-10">10</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef2f848384859-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef2f848384859-2"><span class="crayon-h">&nbsp;&nbsp; </span>dept_info<span class="crayon-h"> </span>dept<span class="crayon-t">%ROWTYPE</span>;</div><div class="crayon-line" id="crayon-63f82f988ef2f848384859-3"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef2f848384859-4"><span class="crayon-h">&nbsp;&nbsp; </span>dept_info.deptno<span class="crayon-h"> </span>:=<span class="crayon-h"> </span>30;</div><div class="crayon-line" id="crayon-63f82f988ef2f848384859-5"><span class="crayon-h">&nbsp;&nbsp; </span>dept_info.dname<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'MARKETING'</span>;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef2f848384859-6"><span class="crayon-h">&nbsp;&nbsp; </span>dept_info.loc<span class="crayon-h"> </span>:=<span class="crayon-h"> </span><span class="crayon-s">'ATLANTA'</span>;</div><div class="crayon-line" id="crayon-63f82f988ef2f848384859-7"><span class="crayon-c">-- Record dept_info будет иметь значения заполненных столбцов, а null</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef2f848384859-8"><span class="crayon-c">-- для любых других столбцов.</span></div><div class="crayon-line" id="crayon-63f82f988ef2f848384859-9"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">UPDATE</span><span class="crayon-h"> </span>dept<span class="crayon-h"> </span><span class="crayon-r">SET</span><span class="crayon-h"> </span><span class="crayon-r">ROW</span><span class="crayon-h"> </span>=<span class="crayon-h"> </span>dept_info<span class="crayon-h"> </span><span class="crayon-r">WHERE</span><span class="crayon-h"> </span>deptno<span class="crayon-h"> </span>=<span class="crayon-h"> </span>30;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef2f848384859-10"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p></p><p>Ключевое слово ROW разрешено только с левой стороны предложения SET.<br>Аргумент SET ROW должен быть реальной записью PL/SQL, а не подзапросом, который возвращает одну строку.<br>Запись также может содержать коллекции или объекты.</p><h2 id="rec12">Пример использования RETURNING с Record</h2><p>Операторы INSERT, UPDATE и DELETE могут включать предложение RETURNING, которое возвращает значения столбца из затронутой строки в переменную записи PL/SQL. Это устраняет необходимость выбора строки после вставки или обновления или перед удалением.<br>По умолчанию вы можете использовать это предложение только при работе с одной строкой. Когда вы используете коллекцию SQL, вы можете использовать форму RETURNING BULK COLLECT INTO для хранения результатов в одной или нескольких коллекциях.<br>Следующий пример обновляет <span class="arg">salary</span> (зарплату) <span class="arg">employee</span> (сотрудников) и возвращает <span class="arg">last_name</span> (имя сотрудника), и <span class="arg">new salary</span> (новую зарплату) в переменную <span class="arg">emp_info</span>:</p><div id="crayon-63f82f988ef32869080096" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE EmpRec IS RECORD (last_name employees.last_name%TYPE, salary employees.salary%TYPE);
emp_info EmpRec;
emp_id NUMBER := 100;
BEGIN
UPDATE employees SET salary = salary * 1.1 WHERE employee_id = emp_id
RETURNING last_name, salary INTO emp_info;
dbms_output.put_line('Простое повышение для '
|| emp_info.last_name || ', в количестве ' || emp_info.salary);
ROLLBACK;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef32869080096-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef32869080096-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef32869080096-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef32869080096-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef32869080096-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef32869080096-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef32869080096-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef32869080096-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef32869080096-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef32869080096-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef32869080096-11">11</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef32869080096-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef32869080096-2"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>EmpRec<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">RECORD</span><span class="crayon-h"> </span>(last_name<span class="crayon-h"> </span>employees.last_name<span class="crayon-t">%TYPE</span>,<span class="crayon-h"> </span>salary<span class="crayon-h"> </span>employees.salary<span class="crayon-t">%TYPE</span>);</div><div class="crayon-line" id="crayon-63f82f988ef32869080096-3"><span class="crayon-h">&nbsp;&nbsp; </span>emp_info<span class="crayon-h"> </span>EmpRec;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef32869080096-4"><span class="crayon-h">&nbsp;&nbsp; </span>emp_id<span class="crayon-h"> </span><span class="crayon-r">NUMBER</span><span class="crayon-h"> </span>:=<span class="crayon-h"> </span>100;</div><div class="crayon-line" id="crayon-63f82f988ef32869080096-5"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef32869080096-6"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">UPDATE</span><span class="crayon-h"> </span>employees<span class="crayon-h"> </span><span class="crayon-r">SET</span><span class="crayon-h"> </span>salary<span class="crayon-h"> </span>=<span class="crayon-h"> </span>salary<span class="crayon-h"> </span>*<span class="crayon-h"> </span>1.1<span class="crayon-h"> </span><span class="crayon-r">WHERE</span><span class="crayon-h"> </span>employee_id<span class="crayon-h"> </span>=<span class="crayon-h"> </span>emp_id</div><div class="crayon-line" id="crayon-63f82f988ef32869080096-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">RETURNING</span><span class="crayon-h"> </span>last_name,<span class="crayon-h"> </span>salary<span class="crayon-h"> </span><span class="crayon-r">INTO</span><span class="crayon-h"> </span>emp_info;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef32869080096-8"><span class="crayon-h">&nbsp;&nbsp; </span>dbms_output.put_line(<span class="crayon-s">'Простое повышение для '</span><span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef32869080096-9"><span class="crayon-h">&nbsp;&nbsp; </span>||<span class="crayon-h"> </span>emp_info.last_name<span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">', в количестве '</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>emp_info.salary);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef32869080096-10"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">ROLLBACK</span>;</div><div class="crayon-line" id="crayon-63f82f988ef32869080096-11"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p></p><h3>Ограничения на INSERT / UPDATE записей</h3><p>В настоящее время к INSERT/UPDATE записей применяются следующие ограничения:<br>Переменные Record допускаются только в следующих местах:</p><ul><li>В правой части предложения SET в инструкции UPDATE</li><li>В предложении VALUES инструкции INSERT</li><li>В подпункте INTO условия RETURNING</li></ul><p>Переменные Record не допускаются в списке SELECT, WHERE, условии GROUP BY или ORDER BY.</p><p>Ключевое слово ROW разрешено только с левой стороны предложения SET. Кроме того, вы не можете использовать ROW с подзапросом.<br>В UPDATE разрешено только одно предложение SET, если используется ROW.<br>Если в VALUES оператора INSERT содержит переменную Record, то в этом предложении не допускается никакая другая переменная или значение.<br>Если INTO в предложении RETURNING содержит переменную Record, то не допускается никакая другая переменная или значение.<br>Не поддерживаются следующие:</p><ul><li>Типы вложенных записей</li><li>Функции, возвращающие запись</li><li>Запись вложений/обновлений с помощью оператора EXECUTE IMMEDIATE.</li></ul><h2 id="rec14">Пример запроса данных в коллекцию Record</h2><p>Вы можете использовать предложение BULK COLLECT с инструкцией SELECT INTO или FETCH для извлечения набора строк в коллекцию записей.</p><div id="crayon-63f82f988ef35743174104" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top:12px;margin-bottom:12px;font-size:12px!important;line-height:15px!important"><div class="crayon-toolbar" data-settings=" show" style="font-size:12px!important;height:18px!important;line-height:18px!important"><span class="crayon-title"></span><div class="crayon-tools" style="font-size:12px!important;height:18px!important;line-height:18px!important"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Oracle PL/SQL</span></div></div><div class="crayon-info" style="min-height:16.8px!important;line-height:16.8px!important"></div><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;font-size:12px!important;line-height:15px!important">
DECLARE
TYPE EmployeeSet IS TABLE OF employees%ROWTYPE;
underpaid EmployeeSet; -- Удерживает набор строк из таблицы EMPLOYEES.
CURSOR c1 IS SELECT first_name, last_name FROM employees;
TYPE NameSet IS TABLE OF c1%ROWTYPE;
some_names NameSet; -- Удерживает набор частичных строк из таблицы EMPLOYEES.
BEGIN
-- С помощью одного запроса мы приводим все соответствующие данные в коллекцию записей.
SELECT * BULK COLLECT INTO underpaid FROM employees
WHERE salary &lt; 2500 ORDER BY salary DESC;
-- Теперь мы можем обрабатывать данные, изучая коллекцию или передавая ее
-- отдельной процедуре, вместо написания цикла FETCH для каждой строки.
dbms_output.put_line(underpaid.COUNT || ' people make less than 2500.');
FOR i IN underpaid.FIRST .. underpaid.LAST
LOOP
dbms_output.put_line(underpaid(i).last_name || ' makes ' || underpaid(i).salary);
END LOOP;
-- Мы также можем привести только некоторые из столбцов таблицы.
-- Здесь мы получаем имена и фамилии 10 произвольных сотрудников.
SELECT first_name, last_name BULK COLLECT INTO some_names FROM employees WHERE ROWNUM &lt; 11;
FOR i IN some_names.FIRST .. some_names.LAST
LOOP
dbms_output.put_line('Employee = '
|| some_names(i).first_name || ' '
|| some_names(i).last_name);
END LOOP;
END;</textarea></div><div class="crayon-main" style=""><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums" data-settings="hide"><div class="crayon-nums-content" style="font-size:12px!important;line-height:15px!important"><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-2">2</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-4">4</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-6">6</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-8">8</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-10">10</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-12">12</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-14">14</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-16">16</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-18">18</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-20">20</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-22">22</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-24">24</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-26">26</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-28">28</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-63f82f988ef35743174104-30">30</div><div class="crayon-num" data-line="crayon-63f82f988ef35743174104-31">31</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size:12px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4"><div class="crayon-line" id="crayon-63f82f988ef35743174104-1"><span class="crayon-r">DECLARE</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-2"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>EmployeeSet<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">TABLE</span><span class="crayon-h"> </span><span class="crayon-r">OF</span><span class="crayon-h"> </span>employees<span class="crayon-t">%ROWTYPE</span>;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-3"><span class="crayon-h">&nbsp;&nbsp; </span>underpaid<span class="crayon-h"> </span>EmployeeSet;<span class="crayon-h"> </span><span class="crayon-c">-- Удерживает набор строк из таблицы EMPLOYEES.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-4">&nbsp;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-5"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">CURSOR</span><span class="crayon-h"> </span>c1<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">SELECT</span><span class="crayon-h"> </span>first_name,<span class="crayon-h"> </span>last_name<span class="crayon-h"> </span><span class="crayon-r">FROM</span><span class="crayon-h"> </span>employees;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-6"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">TYPE</span><span class="crayon-h"> </span>NameSet<span class="crayon-h"> </span><span class="crayon-r">IS</span><span class="crayon-h"> </span><span class="crayon-r">TABLE</span><span class="crayon-h"> </span><span class="crayon-r">OF</span><span class="crayon-h"> </span>c1<span class="crayon-t">%ROWTYPE</span>;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-7"><span class="crayon-h">&nbsp;&nbsp; </span>some_names<span class="crayon-h"> </span>NameSet;<span class="crayon-h"> </span><span class="crayon-c">-- Удерживает набор частичных строк из таблицы EMPLOYEES.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-8">&nbsp;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-9"><span class="crayon-r">BEGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-10"><span class="crayon-c">-- С помощью одного запроса мы приводим все соответствующие данные в коллекцию записей.</span></div><div class="crayon-line" id="crayon-63f82f988ef35743174104-11"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">SELECT</span><span class="crayon-h"> </span>*<span class="crayon-h"> </span>BULK<span class="crayon-h"> </span><span class="crayon-k">COLLECT</span><span class="crayon-h"> </span><span class="crayon-r">INTO</span><span class="crayon-h"> </span>underpaid<span class="crayon-h"> </span><span class="crayon-r">FROM</span><span class="crayon-h"> </span>employees</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">WHERE</span><span class="crayon-h"> </span>salary<span class="crayon-h"> </span><span class="crayon-h">&lt;</span><span class="crayon-h"> </span>2500<span class="crayon-h"> </span><span class="crayon-r">ORDER</span><span class="crayon-h"> </span><span class="crayon-r">BY</span><span class="crayon-h"> </span>salary<span class="crayon-h"> </span><span class="crayon-r">DESC</span>;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-14"><span class="crayon-c">-- Теперь мы можем обрабатывать данные, изучая коллекцию или передавая ее</span></div><div class="crayon-line" id="crayon-63f82f988ef35743174104-15"><span class="crayon-c">-- отдельной процедуре, вместо написания цикла FETCH для каждой строки.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-16"><span class="crayon-h">&nbsp;&nbsp; </span>dbms_output.put_line(underpaid.<span class="crayon-st">COUNT</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">' people make less than 2500.'</span>);</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-17"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">FOR</span><span class="crayon-h"> </span>i<span class="crayon-h"> </span><span class="crayon-r">IN</span><span class="crayon-h"> </span>underpaid.<span class="crayon-k">FIRST</span><span class="crayon-h"> </span>..<span class="crayon-h"> </span>underpaid.<span class="crayon-k">LAST</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-18"><span class="crayon-h">&nbsp;&nbsp; </span>LOOP</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>dbms_output.put_line(underpaid(i).last_name<span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">' makes '</span><span class="crayon-h"> </span>||<span class="crayon-h"> </span>underpaid(i).salary);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-20"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">END</span><span class="crayon-h"> </span>LOOP;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-22"><span class="crayon-c">-- Мы также можем привести только некоторые из столбцов таблицы.</span></div><div class="crayon-line" id="crayon-63f82f988ef35743174104-23"><span class="crayon-c">-- Здесь мы получаем имена и фамилии 10 произвольных сотрудников.</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-24"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">SELECT</span><span class="crayon-h"> </span>first_name,<span class="crayon-h"> </span>last_name<span class="crayon-h"> </span>BULK<span class="crayon-h"> </span><span class="crayon-k">COLLECT</span><span class="crayon-h"> </span><span class="crayon-r">INTO</span><span class="crayon-h"> </span>some_names<span class="crayon-h"> </span><span class="crayon-r">FROM</span><span class="crayon-h"> </span>employees<span class="crayon-h"> </span><span class="crayon-r">WHERE</span><span class="crayon-h"> </span><span class="crayon-r">ROWNUM</span><span class="crayon-h"> </span><span class="crayon-h">&lt;</span><span class="crayon-h"> </span>11;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-25"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">FOR</span><span class="crayon-h"> </span>i<span class="crayon-h"> </span><span class="crayon-r">IN</span><span class="crayon-h"> </span>some_names.<span class="crayon-k">FIRST</span><span class="crayon-h"> </span>..<span class="crayon-h"> </span>some_names.<span class="crayon-k">LAST</span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-26"><span class="crayon-h">&nbsp;&nbsp; </span>LOOP</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>dbms_output.put_line(<span class="crayon-s">'Employee = '</span><span class="crayon-h"></span></div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>||<span class="crayon-h"> </span>some_names(i).first_name<span class="crayon-h"> </span>||<span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"></span></div><div class="crayon-line" id="crayon-63f82f988ef35743174104-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>||<span class="crayon-h"> </span>some_names(i).last_name);</div><div class="crayon-line crayon-striped-line" id="crayon-63f82f988ef35743174104-30"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-r">END</span><span class="crayon-h"> </span>LOOP;</div><div class="crayon-line" id="crayon-63f82f988ef35743174104-31"><span class="crayon-r">END</span>;</div></div></td></tr></table></div></div><p></p></div><footer class="entry-meta"><span class="cat-links">Рубрика:&nbsp;<a href="category/collections-and-records-oracle-plsql.html" rel="category tag">Коллекции и записи Oracle PL/SQL</a></span> <span class="sep">| </span><span class="permalink"><a href="record-oracle-plsql.html" rel="bookmark" title="Прямая ссылка на Record Oracle PL/SQL">Permalink</a></span></footer></article><nav role="navigation" id="nav-below" class="site-navigation post-navigation"><h1 class="assistive-text">Post navigation</h1><div class="nav-previous"><a href="comments-sql-in-mysql.html" rel="prev"><span class="meta-nav">&laquo;</span> Комментарии MySQL</a></div><div class="nav-next"><a href="type-oracle-plsql.html" rel="next">%TYPE атрибут Oracle PL/SQL <span class="meta-nav">&raquo;</span></a></div></nav></div></div><div id="secondary" class="widget-area"><div id="sidebar-1" class="sidebar" role="complementary"><aside id="nav_menu-4" class="widget widget_nav_menu"><h1 class="widget-title">ORACLE PL/SQL</h1><div class="menu-programmirovanie-oracle-plsql-container"><ul id="menu-programmirovanie-oracle-plsql" class="menu"><li id="menu-item-2217" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2217"><a href="procedures.html">Процедуры</a></li><li id="menu-item-2218" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2218"><a href="functions.html">Функции</a></li><li id="menu-item-2216" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2216"><a href="triggers.html">Триггеры</a></li><li id="menu-item-7466" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7466"><a href="collections-and-records-oracle-plsql.html">Коллекции и записи</a></li><li id="menu-item-2246" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2246"><a href="cursors.html">Курсоры</a></li><li id="menu-item-7709" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7709"><a href="packages-oracle-plsql.html">Пакеты</a></li><li id="menu-item-8217" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8217"><a href="dynamic-sql.html">Динамический SQL</a></li><li id="menu-item-2353" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2353"><a href="sequences.html">Последовательности</a></li><li id="menu-item-2540" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2540"><a href="tables-and-views.html">Таблицы и представления</a></li><li id="menu-item-2677" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2677"><a href="datatypes.html">Типы данных</a></li><li id="menu-item-2449" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2449"><a href="transactions.html">Транзакции</a></li><li id="menu-item-2316" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2316"><a href="conditional-statements.html">Условные операторы</a></li><li id="menu-item-2340" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2340"><a href="loops.html">Циклы</a></li><li id="menu-item-8302" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8302"><a href="anonymous-block-plsql.html">Блоки PL/SQL</a></li></ul></div></aside><aside id="nav_menu-2" class="widget widget_nav_menu"><h1 class="widget-title">ФУНКЦИИ ORACLE/PLSQL</h1><div class="menu-funkczii-oracle-pl-sql-container"><ul id="menu-funkczii-oracle-pl-sql" class="menu"><li id="menu-item-4" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-4"><a title="function category" href="index.html">По категориям</a></li><li id="menu-item-7402" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7402"><a href="analytic.html">Аналитические</a></li><li id="menu-item-7405" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7405"><a href="string-character.html">Символьные / строковые</a></li><li id="menu-item-7406" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7406"><a href="numeric-mathematical.html">Числовые / математические</a></li><li id="menu-item-7403" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7403"><a href="date-time.html">Дата / время</a></li><li id="menu-item-7407" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7407"><a href="conversion.html">Преобразование</a></li><li id="menu-item-7404" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7404"><a href="advanced-function.html">Вспомогательные</a></li></ul></div></aside><aside id="custom_html-14" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"></div></aside></div></div></div><footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info"><div>&copy; Клуб дедов-программистов</div></div></footer></div><script src="wp-content/cache/min/1/5da3b72814b1a36896cd845e11329e29.js" data-minify="1" defer=""></script></body></html>